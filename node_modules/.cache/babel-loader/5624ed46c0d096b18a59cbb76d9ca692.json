{"ast":null,"code":"var _jsxFileName = \"/home/jc-2/Documents/sociality-web/src/components/categories/CategoryForm.js\";\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { withFormik } from 'formik';\nimport Yup, { object as yupObject, string as yupString, number as yupNumber } from 'yup';\nimport swal from 'sweetalert';\nimport { withRouter, useHistory } from 'react-router-dom';\nimport { isNull, isEmpty } from 'lodash';\nimport { categoryAdd, categoryUpdate, singleCategory, resetAddCategory, resetUpdateCategory } from '../../store/actions/categoryActions';\nimport ImageUpload from '../global/ImageUpload';\nimport ApiClient from '../apiClient';\nimport load from '../../methods/load';\n\nconst CategoryForm = ({\n  handleFormVisibilty,\n  handleBlur,\n  handleChange,\n  values,\n  isRequesting,\n  isUpdateRequesting,\n  errors,\n  touched,\n  setFieldValue,\n  categoryId,\n  singleCategory,\n  allTypes,\n  getCategory\n}) => {\n  const token = localStorage.getItem('token');\n  useEffect(() => {\n    if (categoryId) {// singleCategory(categoryId, token);\n    }\n  }, [categoryId]);\n\n  const getImage = value => {\n    setFieldValue('image', value);\n  };\n\n  const saveForm = e => {\n    e.preventDefault();\n    let url = '/category';\n    console.log(\"values\", values);\n    let value = { ...values\n    };\n    if (categoryId) value = { ...values,\n      id: categoryId\n    };\n    load(true);\n\n    if (!categoryId) {\n      ApiClient.post(url, value).then(res => {\n        if (res.status == 200) {\n          handleFormVisibilty();\n          getCategory();\n        }\n      }, err => {});\n    } else {\n      ApiClient.put(url, value).then(res => {\n        if (res.status == 200) {\n          handleFormVisibilty();\n          getCategory();\n        }\n      }, err => {});\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary mb-3\",\n    onClick: () => {\n      handleFormVisibilty();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, \"View Categories\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: saveForm,\n    className: \"needs-validation\",\n    noValidate: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, !categoryId ? 'Add' : 'Edit', \" category\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ImageUpload, {\n    getImage: getImage,\n    type: \"category\",\n    value: values.image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group col-md-4 col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    className: \"form-control\",\n    value: values.name,\n    onBlur: handleBlur,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }), errors.name && touched.name && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    style: {\n      display: 'block'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 19\n    }\n  }, errors.name)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group col-md-4 col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  }, \"Category\"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"category\",\n    className: \"form-control\",\n    value: values.category,\n    onBlur: handleBlur,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 19\n    }\n  }, \"Select category\"), allTypes && allTypes.map(item => /*#__PURE__*/React.createElement(\"option\", {\n    value: item.id,\n    key: item.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 23\n    }\n  }, item.name)))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-footer d-flex justify-content-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-danger\",\n    onClick: handleFormVisibilty,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: `btn btn-primary   ${isRequesting || isUpdateRequesting ? 'btn-progress disabled' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }, \"Save Changes\")))));\n};\n\nconst CatgeoryFormFormik = withFormik({\n  enableReinitialize: true,\n  mapPropsToValues: ({\n    singleCategoryData\n  }) => {\n    return {\n      name: singleCategoryData && singleCategoryData.name || '',\n      subCategory: singleCategoryData && singleCategoryData.parentid || '',\n      category: singleCategoryData && singleCategoryData.category || '',\n      image: singleCategoryData && singleCategoryData.image || ''\n    };\n  },\n  validationSchema: yupObject().shape({\n    name: yupString().max(15).required(),\n    subCategory: yupString().required(),\n    category: yupString().required() // .required()\n    // password: yupString().min(8)\n\n  }),\n  handleSubmit: async (values, {\n    props,\n    setSubmitting,\n    resetForm\n  }) => {\n    console.log(values, \"ddjfdjkfj\"); // const handleSubmit = (values, { props }) => {\n    // const { router } = props;\n\n    const token = localStorage.getItem('token'); // console.log('state values', values);\n\n    if (!props.categoryId) {\n      console.log(props.categoryId, \"allTyddddpes\");\n      props.categoryAdd({\n        name: values.name,\n        typeid: values.category,\n        // parentid: values.subCategory,\n        image: values.image\n      }, token);\n    } else {\n      props.categoryUpdate({\n        name: values.name,\n        typeid: values.category,\n        // parentid: values.subCategory,\n        image: values.image\n      }, props.categoryId, token);\n    } // resetForm();\n\n  },\n  displayName: 'CategoryForm' // helps with React DevTools\n\n})(CategoryForm);\n\nconst mapStateToProps = state => ({\n  data: state.categoryAdd.data,\n  isRequesting: state.categoryAdd.isRequesting,\n  isUpdateRequesting: state.categoryUpdate.isRequesting,\n  isSuccess: state.categoryAdd.isSuccess,\n  isUpdateSuccess: state.categoryUpdate.isSuccess,\n  isError: state.categoryAdd.isError,\n  singleCategoryData: state.category.data\n});\n\nexport default connect(mapStateToProps, {\n  categoryAdd,\n  categoryUpdate,\n  singleCategory,\n  resetAddCategory,\n  resetUpdateCategory\n})(CatgeoryFormFormik);","map":{"version":3,"sources":["/home/jc-2/Documents/sociality-web/src/components/categories/CategoryForm.js"],"names":["React","useEffect","useState","connect","withFormik","Yup","object","yupObject","string","yupString","number","yupNumber","swal","withRouter","useHistory","isNull","isEmpty","categoryAdd","categoryUpdate","singleCategory","resetAddCategory","resetUpdateCategory","ImageUpload","ApiClient","load","CategoryForm","handleFormVisibilty","handleBlur","handleChange","values","isRequesting","isUpdateRequesting","errors","touched","setFieldValue","categoryId","allTypes","getCategory","token","localStorage","getItem","getImage","value","saveForm","e","preventDefault","url","console","log","id","post","then","res","status","err","put","image","name","display","category","map","item","CatgeoryFormFormik","enableReinitialize","mapPropsToValues","singleCategoryData","subCategory","parentid","validationSchema","shape","max","required","handleSubmit","props","setSubmitting","resetForm","typeid","displayName","mapStateToProps","state","data","isSuccess","isUpdateSuccess","isError"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { withFormik } from 'formik';\nimport Yup, {\n  object as yupObject,\n  string as yupString,\n  number as yupNumber\n} from 'yup';\nimport swal from 'sweetalert';\nimport { withRouter,useHistory } from 'react-router-dom';\n\nimport { isNull, isEmpty } from 'lodash';\nimport {\n  categoryAdd,\n  categoryUpdate,\n  singleCategory,\n  resetAddCategory,\n  resetUpdateCategory,\n} from '../../store/actions/categoryActions';\nimport ImageUpload from '../global/ImageUpload';\nimport ApiClient from '../apiClient';\nimport load from '../../methods/load';\n\nconst CategoryForm = ({\n  handleFormVisibilty,\n  handleBlur,\n  handleChange,\n  values,\n  isRequesting,\n  isUpdateRequesting,\n  errors,\n  touched,\n  setFieldValue,\n  categoryId,\n  singleCategory,\n  allTypes,\n  getCategory\n}) => {\n  const token = localStorage.getItem('token');\n\n  useEffect(() => {\n    if (categoryId) {\n      // singleCategory(categoryId, token);\n    }\n  }, [categoryId]);\n\n  const getImage = value => {\n    setFieldValue('image', value);\n  };\n\n const saveForm = (e) => {\n   e.preventDefault()\n\n    let url = '/category';\n    console.log(\"values\",values)\n\n    let value={...values}\n    if(categoryId)  value={...values,id:categoryId}\n\n    load(true)\n\n    if(!categoryId){\n      ApiClient.post(url, value).then(res => {\n        if (res.status == 200) {\n          handleFormVisibilty();\n          getCategory()\n        }\n      },err=>{\n      })\n    }else{\n      ApiClient.put(url, value).then(res => {\n        if (res.status == 200) {\n          handleFormVisibilty();\n          getCategory()\n        }\n      },err=>{\n      })\n    }\n\n  }\n\n\n  return (\n    <div className=\"\">\n      <button\n        className=\"btn btn-primary mb-3\"\n        onClick={() => {\n          handleFormVisibilty();\n        }}\n      >\n        View Categories\n      </button>\n      <div className=\"card\">\n        <form\n          onSubmit={saveForm}\n          className=\"needs-validation\"\n          noValidate=\"\"\n        >\n          <div className=\"card-header\">\n            <h4>{!categoryId ? 'Add' : 'Edit'} category</h4>\n          </div>\n          <div className=\"card-body\">\n            <ImageUpload\n              getImage={getImage}\n              type=\"category\"\n              value={values.image}\n            />\n            <div className=\"row\">\n              <div className=\"form-group col-md-4 col-12\">\n                <label>Name</label>\n                <input\n                  type=\"text\"\n                  name=\"name\"\n                  className=\"form-control\"\n                  value={values.name}\n                  onBlur={handleBlur}\n                  onChange={handleChange}\n                />\n                {errors.name && touched.name && (\n                  <div\n                    className=\"invalid-feedback\"\n                    style={{ display: 'block' }}\n                  >\n                    {errors.name}\n                  </div>\n                )}\n              </div>\n              <div className=\"form-group col-md-4 col-12\">\n                <label>Category</label>\n                <select\n                  name=\"category\"\n                  className=\"form-control\"\n                  value={values.category}\n                  onBlur={handleBlur}\n                  onChange={handleChange}\n                >\n                  <option value=\"\">Select category</option>\n                  {allTypes &&\n                    allTypes.map(item => (\n                      <option value={item.id} key={item.id}>{item.name}</option>\n                    ))}\n                </select>\n              \n              </div>\n              \n            </div>\n          </div>\n          <div className=\"card-footer d-flex justify-content-between\">\n            <button\n              type=\"button\"\n              className=\"btn btn-danger\"\n              onClick={handleFormVisibilty}\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              className={`btn btn-primary   ${isRequesting || isUpdateRequesting\n                  ? 'btn-progress disabled'\n                  : ''\n                }`}\n            >\n              Save Changes\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nconst CatgeoryFormFormik = withFormik({\n  enableReinitialize: true,\n  mapPropsToValues: ({ singleCategoryData }) => {\n    return {\n      name: (singleCategoryData && singleCategoryData.name) || '',\n      subCategory: (singleCategoryData && singleCategoryData.parentid) || '',\n      category: (singleCategoryData && singleCategoryData.category) || '',\n      image: (singleCategoryData && singleCategoryData.image) || ''\n    };\n  },\n\n  validationSchema: yupObject().shape({\n    name: yupString()\n      .max(15)\n      .required(),\n    subCategory: yupString().required(),\n    category: yupString().required()\n\n    // .required()\n    // password: yupString().min(8)\n  }),\n   handleSubmit: async (values, { props, setSubmitting, resetForm }) => {\n    console.log(values,\"ddjfdjkfj\");\n\n\n  // const handleSubmit = (values, { props }) => {\n\n    // const { router } = props;\n    const token = localStorage.getItem('token');\n    // console.log('state values', values);\n    if (!props.categoryId) {\n      console.log(props.categoryId, \"allTyddddpes\");\n      props.categoryAdd(\n        {\n          name: values.name,\n          typeid: values.category,\n          // parentid: values.subCategory,\n          image: values.image\n        },\n        token\n      );\n    } else {\n      props.categoryUpdate(\n        {\n          name: values.name,\n          typeid: values.category,\n          // parentid: values.subCategory,\n          image: values.image\n        },\n        props.categoryId,\n        token\n      );\n    }\n\n    // resetForm();\n  },\n\n  displayName: 'CategoryForm' // helps with React DevTools\n})(CategoryForm);\n\nconst mapStateToProps = state => ({\n  data: state.categoryAdd.data,\n  isRequesting: state.categoryAdd.isRequesting,\n  isUpdateRequesting: state.categoryUpdate.isRequesting,\n  isSuccess: state.categoryAdd.isSuccess,\n  isUpdateSuccess: state.categoryUpdate.isSuccess,\n  isError: state.categoryAdd.isError,\n  singleCategoryData: state.category.data\n});\n\nexport default connect(mapStateToProps, {\n  categoryAdd,\n  categoryUpdate,\n  singleCategory,\n  resetAddCategory,\n  resetUpdateCategory\n})(CatgeoryFormFormik);\n"]},"metadata":{},"sourceType":"module"}