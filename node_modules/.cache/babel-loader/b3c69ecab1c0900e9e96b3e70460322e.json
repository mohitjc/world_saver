{"ast":null,"code":"var _jsxFileName = \"/home/jc-2/Documents/sociality-web/src/components/global/ImageUpload.js\";\n/* eslint-disable */\n\nimport React, { useCallback, useState, useEffect } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { withFormik } from 'formik';\nimport * as Yup from 'yup';\nimport { isEmpty } from 'lodash';\nimport swal from 'sweetalert';\nimport { SyncLoader } from 'react-spinners';\nimport { uploadImage } from '../../store/actions/blogsActions';\nimport { API_SLUG } from '../../store/constants';\nconst ImageUpload = _ref => {\n  let {\n    getImage,\n    type,\n    value,\n    placeholder,\n    setImageType,\n    imageType\n  } = _ref;\n  const [images, setImages] = useState([]);\n  const {\n    data,\n    isRequesting,\n    isSuccess\n  } = useSelector(state => state.imageUpload);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (isSuccess) {\n      getImage(data && data.data.imagePath);\n    }\n\n    // if (isSuccess && placeholder === 'Add banner') {\n\n    // }\n\n    // setImages(values.images);\n  }, [data, images, isSuccess]);\n  const maxSize = 1048576;\n  const onDrop = useCallback((acceptedFiles, rejectedFiles) => {\n    if (setImageType) {\n      setImageType(placeholder);\n    }\n    getBase64(acceptedFiles[0]);\n    // console.log('acceptedFiles', acceptedFiles);\n    setImages(acceptedFiles.map(file => Object.assign(file, {\n      preview: URL.createObjectURL(file)\n    })));\n  });\n  const {\n    isDragActive,\n    getRootProps,\n    getInputProps,\n    isDragReject,\n    acceptedFiles,\n    rejectedFiles\n  } = useDropzone({\n    onDrop,\n    accept: 'image/png, image/jpg, image/jpeg, image/svg',\n    minSize: 0,\n    // maxSize,\n    multiple: true\n  });\n\n  // const isFileTooLarge =\n  //   rejectedFiles.length > 0 && rejectedFiles[0].size > maxSize;\n\n  const thumbsContainer = {\n    display: 'flex',\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    marginTop: 16\n  };\n  const thumb = {\n    display: 'inline-flex',\n    borderRadius: 2,\n    border: '1px solid #eaeaea',\n    marginBottom: 8,\n    marginRight: 8,\n    width: 100,\n    height: 100,\n    padding: 4,\n    boxSizing: 'border-box'\n  };\n  const thumbInner = {\n    display: 'flex',\n    minWidth: 0,\n    overflow: 'hidden'\n  };\n  const img = {\n    display: 'block',\n    width: 'auto',\n    height: '100%'\n  };\n  const thumbs = images.map(file => /*#__PURE__*/React.createElement(\"div\", {\n    style: thumb,\n    key: file.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: thumbInner,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: file.preview,\n    style: img,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }))));\n  const files = acceptedFiles.map(file => /*#__PURE__*/React.createElement(\"li\", {\n    key: file.path,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }, file.path, \" - \", file.size, \" bytes\"));\n  function getBase64(file) {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = function () {\n      const token = localStorage.getItem('token');\n      dispatch(uploadImage({\n        type: type,\n        data: reader.result\n      }, token));\n    };\n    reader.onerror = function (error) {\n      // console.log('Error: ', error);\n    };\n    // fetch()\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group image-upload\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"demo-upload\",\n    className: \"dropzone\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dz-message text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", Object.assign({}, getRootProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", Object.assign({}, getInputProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 15\n    }\n  })), !isDragActive && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"drag-active\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, isRequesting && imageType === placeholder ? /*#__PURE__*/React.createElement(SyncLoader, {\n    color: '#5383ff',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 21\n    }\n  }) : !isEmpty(value) ? /*#__PURE__*/React.createElement(\"div\", {\n    style: thumb,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: thumbInner,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: `${API_SLUG}/${value}`,\n    style: img,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 25\n    }\n  }))) : placeholder ? placeholder : 'upload image'), isDragActive && !isDragReject && \"Drop it like it's hot!\", isDragReject && 'File type not accepted, sorry!')))));\n};\nexport default ImageUpload;","map":{"version":3,"names":["React","useCallback","useState","useEffect","useDropzone","useDispatch","useSelector","withFormik","Yup","isEmpty","swal","SyncLoader","uploadImage","API_SLUG","ImageUpload","getImage","type","value","placeholder","setImageType","imageType","images","setImages","data","isRequesting","isSuccess","state","imageUpload","dispatch","imagePath","maxSize","onDrop","acceptedFiles","rejectedFiles","getBase64","map","file","Object","assign","preview","URL","createObjectURL","isDragActive","getRootProps","getInputProps","isDragReject","accept","minSize","multiple","thumbsContainer","display","flexDirection","flexWrap","marginTop","thumb","borderRadius","border","marginBottom","marginRight","width","height","padding","boxSizing","thumbInner","minWidth","overflow","img","thumbs","name","files","path","size","reader","FileReader","readAsDataURL","onload","token","localStorage","getItem","result","onerror","error"],"sources":["/home/jc-2/Documents/sociality-web/src/components/global/ImageUpload.js"],"sourcesContent":["/* eslint-disable */\n\nimport React, { useCallback, useState, useEffect } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { withFormik } from 'formik';\nimport * as Yup from 'yup';\nimport { isEmpty } from 'lodash';\nimport swal from 'sweetalert';\n\nimport { SyncLoader } from 'react-spinners';\n\nimport { uploadImage } from '../../store/actions/blogsActions';\nimport { API_SLUG } from '../../store/constants';\n\nconst ImageUpload = ({\n  getImage,\n  type,\n  value,\n  placeholder,\n  setImageType,\n  imageType\n}) => {\n  const [images, setImages] = useState([]);\n  const { data, isRequesting, isSuccess } = useSelector(\n    state => state.imageUpload\n  );\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (isSuccess) {\n      getImage(data && data.data.imagePath);\n    }\n\n    // if (isSuccess && placeholder === 'Add banner') {\n\n    // }\n\n    // setImages(values.images);\n  }, [data, images, isSuccess]);\n\n  const maxSize = 1048576;\n\n  const onDrop = useCallback((acceptedFiles, rejectedFiles) => {\n    if (setImageType) {\n      setImageType(placeholder);\n    }\n    getBase64(acceptedFiles[0]);\n    // console.log('acceptedFiles', acceptedFiles);\n    setImages(\n      acceptedFiles.map(file =>\n        Object.assign(file, {\n          preview: URL.createObjectURL(file)\n        })\n      )\n    );\n  });\n  const {\n    isDragActive,\n    getRootProps,\n    getInputProps,\n    isDragReject,\n    acceptedFiles,\n    rejectedFiles\n  } = useDropzone({\n    onDrop,\n    accept: 'image/png, image/jpg, image/jpeg, image/svg',\n    minSize: 0,\n    // maxSize,\n    multiple: true\n  });\n\n  // const isFileTooLarge =\n  //   rejectedFiles.length > 0 && rejectedFiles[0].size > maxSize;\n\n  const thumbsContainer = {\n    display: 'flex',\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    marginTop: 16\n  };\n\n  const thumb = {\n    display: 'inline-flex',\n    borderRadius: 2,\n    border: '1px solid #eaeaea',\n    marginBottom: 8,\n    marginRight: 8,\n    width: 100,\n    height: 100,\n    padding: 4,\n    boxSizing: 'border-box'\n  };\n\n  const thumbInner = {\n    display: 'flex',\n    minWidth: 0,\n    overflow: 'hidden'\n  };\n\n  const img = {\n    display: 'block',\n    width: 'auto',\n    height: '100%'\n  };\n\n  const thumbs = images.map(file => (\n    <div style={thumb} key={file.name}>\n      <div style={thumbInner}>\n        <img src={file.preview} style={img} />\n      </div>\n    </div>\n  ));\n  const files = acceptedFiles.map(file => (\n    <li key={file.path}>\n      {file.path} - {file.size} bytes\n    </li>\n  ));\n\n  function getBase64(file) {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = function() {\n      const token = localStorage.getItem('token');\n\n      dispatch(uploadImage({ type: type, data: reader.result }, token));\n    };\n    reader.onerror = function(error) {\n      // console.log('Error: ', error);\n    };\n    // fetch()\n  }\n  return (\n    <>\n      <div className=\"form-group image-upload\">\n        <div id=\"demo-upload\" className=\"dropzone\">\n          <div className=\"dz-message text-muted\">\n            <div {...getRootProps()}>\n              <input {...getInputProps()} />\n              {!isDragActive && (\n                <div className=\"drag-active\">\n                  {isRequesting && imageType === placeholder ? (\n                    <SyncLoader color={'#5383ff'} />\n                  ) : !isEmpty(value) ? (\n                    <div style={thumb}>\n                      <div style={thumbInner}>\n                        <img\n                          src={`${API_SLUG}/${value}`}\n                          style={img}\n                        />\n                      </div>\n                    </div>\n                  ) : placeholder ? (\n                    placeholder\n                  ) : (\n                    'upload image'\n                  )}\n                </div>\n              )}\n              {isDragActive && !isDragReject && \"Drop it like it's hot!\"}\n              {isDragReject && 'File type not accepted, sorry!'}\n              {/* {isFileTooLarge && (\n              <div className=\"text-danger mt-2\">File is too large.</div>\n            )} */}\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ImageUpload;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}